<!DOCTYPE html>
<html lang = "en">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/main.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="css/vanGoghd3.css" type="text/css" charset="utf-8">

    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400|Lora:400,700|Roboto:100,300,400|Josefin+Sans:300,400|Playfair+Display:400,700|Oswald:300,500" rel="stylesheet">

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="libraries/lodash.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
      integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
      crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
      integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
      crossorigin=""></script>
    <!-- Mapbox -->
    <link rel="stylesheet" type="text/css" href="https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.css" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.js"></script>
    <!-- Colors -->
    <script src='libraries/vibrant.min.js'></script>
    <!--Tween-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>

    <script>
      // let filePath = '../assets/' // Local Testing
      let filePath = '/ms1-2018/interactivity/assets/' // GitHub Pages

      let paintingSelection = 0;

      function distance(lat1, lon1, lat2, lon2, unit) {
      	let radlat1 = Math.PI * lat1/180
      	let radlat2 = Math.PI * lat2/180
      	let theta = lon1-lon2
      	let radtheta = Math.PI * theta/180
      	let dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
      	dist = Math.acos(dist)
      	dist = dist * 180/Math.PI
      	dist = dist * 60 * 1.1515
      	if (unit=="K") { dist = dist * 1.609344 }
      	if (unit=="N") { dist = dist * 0.8684 }
      	return dist
      }

      function getRandomInt(max,min) {
        return Math.floor(Math.random() * max) + min;
      }

    </script>
  </head>
  <body>
    <div id = 'sticky-title'>
      <h1>The Migration of Art</h1>
    </div>
    <div id = 'scroll'>
      <!-- graphic container -->
      <div class='scroll__graphic graphic'>
        <!-- actual graphic/chart -->
        <div id = 'vanGoghd3-svg' class = 'chart'>
          <svg id = "svg-chart"></svg>
        </div>
      </div>

        <!-- step/text container -->
      <div id = 'vanGoghd3-intro' class = 'scroll__text'>
        <div class = 'step' data-step='1' id = "step-1">
          <!-- <hr> -->
          <!-- <h1><span>&nbsp;The&nbsp;<span></h1>
          <h1><span>&nbsp;Migration&nbsp;<span></h1>
          <h1><span>&nbsp;of&nbsp;&nbsp;Art&nbsp;<span></h1> -->
        </div>
        <hr class = "whitespace" style = "height:60vh"/>
        <div class = 'step' data-step='2' id = "step-2">
          <!-- <hr> -->
          <!-- <h2>STEP 2</h2> -->
          <p><span>We'll be following the history of where and when The Met's Van Gogh collection of paintings changed hands, charting their history of travels before ultimately arriving in the museum's galleries.<span></p>
          <hr class = "whitespace" style = "height:40vh"/>
          <p><span>Paintings move when they are acquired by an owner in a new location or when they go on exhibition. We'll be charting both these movements together on this map...<span></p>
          <hr class = "whitespace" style = "height:20vh"/>
        </div>
        <div class = 'step' data-step='3' id = "step-3">
          <!-- <hr> -->
          <div class = 'map-text'>
            <!-- <h2>STEP 3</h2> -->
            <hr class = "whitespace" style = "height:80vh"/>
          </div>
          <div id = 'map'>
            <link rel="stylesheet" href="css/map.css" type="text/css" charset="utf-8">
            <script src="js/mapAllPaths.js"></script>
          </div>
          <div class = "marey" id = "marey">
            <div id = "marey-legend">
              <h3>The Migration of Art</h3>
              <h1>Travel Timeline</h1>
              <hr>
              <h2>When and where did this painting travel across the globe?</h2>
              <p>Inspried by <a href = "https://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0003zP">E.J. Marey's 1885 graphical train schedule</a>, this chart shows the path traveled by a select painting from its creation until 2017.
                <br><br>
                Every location visited by at least one painting in this collection is represented by a horizontal line, arranged from East to West. A painting's path will travel to a new location in a year when a new owner acquires that piece or when it goes on exhibition.
                <br><br>
                <span style="color:#e55c69;background-color:rgba(0,0,0,0)">Ownership tenures</span> are represented by thick lines, with length representing duration of ownership:
                <svg height="35px" width="100%" id="ownership-demo">
                  <line x1="0%" y1="50%" x2="100%" y2="50%" style="stroke:#e55c69;stroke-width:1"></line>
                  <line x1="0%" y1="50%" x2="40%" y2="50%" style="stroke:#e55c69;stroke-width:5"></line>
                  <line x1="50%" y1="50%" x2="100%" y2="50%" style="stroke:#e55c69;stroke-width:5"></line>
                </svg>
                and <span style="color:#DAA520;background-color:rgba(0,0,0,0)">exhibitions</span> by circles:
                <svg height="35px" width="100%" id="ownership-demo">
                  <line x1="0%" y1="50%" x2="100%" y2="50%" style="stroke:#e55c69;stroke-width:1"></line>
                  <line x1="0%" y1="50%" x2="40%" y2="50%" style="stroke:#e55c69;stroke-width:5"></line>
                  <circle cx="25%" cy="50%" r="6" fill="none" stroke-width="2" stroke="#DAA520"></circle>
                  <circle cx="35%" cy="50%" r="6" fill="none" stroke-width="2" stroke="#DAA520"></circle>
                  <line x1="50%" y1="50%" x2="100%" y2="50%" style="stroke:#e55c69;stroke-width:5"></line>
                  <circle cx="95%" cy="50%" r="6" fill="none" stroke-width="2" stroke="#DAA520"></circle>
                </svg>
              </p>
            </div>
            <div id = "marey-chart">
            </div>
          </div>
          <div id = "slidecontainer">
            <link rel="stylesheet" href="css/slider.css" type="text/css" charset="utf-8">
            <div id = "slider-buttons">
              <p style="color:#fff;">This is where I hope to put play, pause, and restart buttons to animate my year slider</p>
              <!-- <button id = "play">
                &#9658;
              </button>
              <button id = "pause">
                <b>||<b>
              </button>
              <button id = "replay">
                &#8634;
              </button> -->
            </div>
            <div id = "slider">
              <script>

              </script>
              <input type="range" class="year-slider" id="year-slider">
              <p id = "slideyear">YEAR</p>
            </div>
          </div>
          <hr class = "whitespace" style = "height:20vh"/>
        </div>
        <div class = 'step' data-step='4' id = "step-4">
          <!-- <hr> -->
          <hr class = "whitespace" style = "height:80vh"/>
            <!-- <h2>STEP 4</h2> -->
        </div>
        <div class = 'step' data-step='5' id = "step-5">
          <!-- <hr> -->
          <hr class = "whitespace" style = "height:80vh"/>
      </div>
    </div>

    <script src="js/vanGoghd3.js"></script>
    <script src="js/graphic.js"></script>

    <script src="js/graph-scroll.js"></script>

    <script>
    // createGraphic('.graphic')

    (function() {
      function graphscroll() {
        // select elements using d3 here since this is a d3 library...
        let graphicEl = d3.select("#scroll");
        let graphicVisEl = graphicEl.select(".scroll__graphic");
        var triggerEls = graphicEl.selectAll('.step');

        // viewport height
				var viewportHeight = window.innerHeight
				var halfViewportHeight = viewportHeight / 2

				// a global function creates and handles all the vis + updates
				var graphic = createGraphic('.graphic')

        // this is it, graph-scroll handles pretty much everything
        // it will automatically add class names to the elements,
        // so you just need to handle the fixed positions with css
        d3.graphScroll()
          .container(graphicEl)
          .graph(graphicVisEl)
          .sections(triggerEls)
          .offset(halfViewportHeight)
          .on('active', function(i) {
            graphic.update(i);
          })
      }

      graphscroll();
    })()
    </script>
    <!-- <div id = "distSmallMults">
      <script src="js/smallMultiplesTotalDistance.js"></script>
    </div> -->
    <script src = "js/distanceMarey.js"></script>
  </body>
</html>
